{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Event",
  "description": "An event that triggered a state transition in a trace",
  "type": "object",
  "required": ["type", "timestamp"],
  "additionalProperties": false,
  "properties": {
    "type": {
      "type": "string",
      "enum": [
        "USER_SELECT_OPTION",
        "USER_FILL_SLOT",
        "USER_UNCERTAIN",
        "OPEN_HINT",
        "ADVANCE_HINT",
        "TOGGLE_INPUT_MODE",
        "SYSTEM_REPROMPT",
        "SYSTEM_NARROW",
        "SYSTEM_MODEL",
        "SYSTEM_STRUCTURE",
        "END_TURN"
      ],
      "description": "Standard event types"
    },
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "ISO-8601 datetime when event occurred"
    },
    "payload": {
      "oneOf": [
        { "type": "object" },
        { "type": "null" }
      ],
      "description": "Event-specific data; shape depends on type"
    }
  }
}
