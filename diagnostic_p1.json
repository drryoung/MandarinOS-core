{
  "schema_version": "1.0",
  "phase_id": "P1",
  "name": "Phase 1 Survival Diagnostic",
  "description": "Conversation-based placement for survival Mandarin.",
  "welcome_prompt": {
    "en": "We'll practice a short conversation about meeting someone new â€” greetings, your name, where you're from, and where you live."
  },
  "tasks": [
    {
      "id": "p1_greeting",
      "type": "greeting_recognition",
      "mode": "tap_choice",
      "prompt": {
        "zh": "ä½ å¥½ï¼"
      },
      "hints": {
        "layer1": {
          "en": "This is a greeting meaning 'Hello'"
        },
        "layer2": {
          "pinyin": "nÇ hÇo",
          "structure": "ä½  = you, å¥½ = good"
        },
        "layer3": {
          "full": "ä½ å¥½ = Hello"
        }
      },
      "target_frames": [
        "frame.greeting.hello"
      ],
      "target_words": [
        "word.ä½ å¥½"
      ],
      "choices": [
        {
          "id": "a",
          "text_zh": "ä½ å¥½",
          "hints": {
            "layer1": "Hello",
            "layer2": "nÇ hÇo",
            "layer3": "ä½ å¥½ = Hello"
          },
          "is_correct": true
        },
        {
          "id": "b",
          "text_zh": "è°¢è°¢",
          "hints": {
            "layer1": "Thank you",
            "layer2": "xiÃ¨ xiÃ¨",
            "layer3": "è°¢è°¢ = Thank you"
          }
        },
        {
          "id": "c",
          "text_zh": "å†è§",
          "hints": {
            "layer1": "Goodbye",
            "layer2": "zÃ i jiÃ n",
            "layer3": "å†è§ = Goodbye"
          }
        },
        {
          "id": "d",
          "text_zh": "å¯¹ä¸èµ·",
          "hints": {
            "layer1": "Sorry",
            "layer2": "duÃ¬ bÃ¹ qÇ",
            "layer3": "å¯¹ä¸èµ· = Sorry"
          }
        }
      ],
      "feedback": {
        "correct": {
          "zh": "å¯¹ï¼ä½ å¥½ï¼å¾ˆé«˜å…´è®¤è¯†ä½  ğŸ™‚"
        },
        "incorrect": {
          "zh": "æ²¡å…³ç³»ï¼Œæˆ‘ä»¬å†è¯•ä¸€æ¬¡ ğŸ™‚"
        }
      },
      "signals": [
        "word_coverage",
        "comprehension",
        "confidence"
      ],
      "scoring": {
        "pass_threshold": 0.8,
        "partial_threshold": 0.5,
        "metrics": [
          {
            "id": "accuracy",
            "type": "accuracy",
            "weight": 1
          }
        ]
      }
    },
    {
      "id": "p1_name",
      "type": "frame_production",
      "mode": "typed_text",
      "prompt": {
        "zh": "ä½ å«ä»€ä¹ˆåå­—ï¼Ÿ"
      },
      "hints": {
        "layer1": {
          "en": "Someone is asking your name"
        },
        "layer2": {
          "pinyin": "nÇ jiÃ o shÃ©nme mÃ­ngzi?",
          "structure": "ä½  = you, å« = called, ä»€ä¹ˆ = what, åå­— = name"
        },
        "layer3": {
          "full": "What is your name? Answer: æˆ‘å«... (wÇ’ jiÃ o...)"
        }
      },
      "target_frames": [
        "frame.identity.name"
      ],
      "target_words": [
        "word.æˆ‘",
        "word.å«",
        "word.åå­—"
      ],
      "choices": [
        {
          "id": "a",
          "text_zh": "æˆ‘å«...",
          "hints": {
            "layer1": "My name is...",
            "layer2": "wÇ’ jiÃ o...",
            "layer3": "æˆ‘å«... = My name is..."
          },
          "is_correct": true
        },
        {
          "id": "b",
          "text_zh": "æˆ‘æ˜¯...",
          "hints": {
            "layer1": "I am...",
            "layer2": "wÇ’ shÃ¬...",
            "layer3": "æˆ‘æ˜¯... = I am..."
          },
          "is_correct": true
        },
        {
          "id": "c",
          "text_zh": "ä½ å¥½",
          "hints": {
            "layer1": "Hello",
            "layer2": "nÇ hÇo",
            "layer3": "ä½ å¥½ = Hello"
          }
        },
        {
          "id": "d",
          "text_zh": "è°¢è°¢",
          "hints": {
            "layer1": "Thank you",
            "layer2": "xiÃ¨ xiÃ¨",
            "layer3": "è°¢è°¢ = Thank you"
          }
        }
      ],
      "expected": {
        "accepted_patterns": [
          "^æˆ‘å«.+",
          "^æˆ‘æ˜¯.+"
        ],
        "semantic_intents": [
          "name_introduce"
        ]
      },
      "feedback": {
        "correct": {
          "zh": "å¾ˆå¥½ï¼å¾ˆé«˜å…´è®¤è¯†ä½  ğŸ™‚"
        },
        "incorrect": {
          "zh": "æ²¡å…³ç³»ï¼ä½ å¯ä»¥è¯´ï¼šæˆ‘å«..."
        }
      },
      "signals": [
        "frame_control",
        "production"
      ],
      "scoring": {
        "pass_threshold": 0.8,
        "partial_threshold": 0.5,
        "metrics": [
          {
            "id": "production",
            "type": "production_correctness",
            "weight": 0.7
          },
          {
            "id": "latency",
            "type": "latency_seconds",
            "weight": 0.3,
            "params": {
              "max_ok_seconds": 10
            }
          }
        ]
      }
    },
    {
      "id": "p1_nationality",
      "type": "reply_selection",
      "mode": "tap_choice",
      "prompt": {
        "zh": "ä½ æ˜¯å“ªå›½äººï¼Ÿ"
      },
      "hints": {
        "layer1": {
          "en": "Someone is asking about your nationality"
        },
        "layer2": {
          "pinyin": "nÇ shÃ¬ nÇ guÃ³ rÃ©n?",
          "structure": "å“ªå›½ = which country, äºº = person"
        },
        "layer3": {
          "full": "What nationality are you?"
        }
      },
      "target_frames": [
        "frame.identity.nationality"
      ],
      "target_words": [
        "word.æ˜¯",
        "word.å“ª",
        "word.å›½",
        "word.äºº"
      ],
      "choices": [
        {
          "id": "a",
          "text_zh": "æˆ‘æ˜¯ç¾å›½äºº",
          "hints": {
            "layer1": "I am American",
            "layer2": "wÇ’ shÃ¬ mÄ›iguÃ³ rÃ©n",
            "layer3": "æˆ‘æ˜¯ç¾å›½äºº = I am American"
          },
          "is_correct": true
        },
        {
          "id": "b",
          "text_zh": "æˆ‘æ˜¯è€å¸ˆ",
          "hints": {
            "layer1": "I am a teacher",
            "layer2": "wÇ’ shÃ¬ lÇoshÄ«",
            "layer3": "æˆ‘æ˜¯è€å¸ˆ = I am a teacher"
          }
        },
        {
          "id": "c",
          "text_zh": "æˆ‘å–œæ¬¢å’–å•¡",
          "hints": {
            "layer1": "I like coffee",
            "layer2": "wÇ’ xÇhuÄn kÄfÄ“i",
            "layer3": "æˆ‘å–œæ¬¢å’–å•¡ = I like coffee"
          }
        },
        {
          "id": "d",
          "text_zh": "æˆ‘ä½åœ¨åŒ—äº¬",
          "hints": {
            "layer1": "I live in Beijing",
            "layer2": "wÇ’ zhÃ¹ zÃ i bÄ›ijÄ«ng",
            "layer3": "æˆ‘ä½åœ¨åŒ—äº¬ = I live in Beijing"
          }
        }
      ],
      "feedback": {
        "correct": {
          "zh": "å¾ˆå¥½ï¼ğŸ™‚"
        },
        "incorrect": {
          "zh": "æ²¡å…³ç³»ï¼Œè¿™ä¸ªé—®é¢˜æ˜¯é—®ä½ çš„å›½ç± ğŸ™‚"
        }
      },
      "signals": [
        "comprehension",
        "frame_control"
      ],
      "scoring": {
        "pass_threshold": 0.8,
        "partial_threshold": 0.5,
        "metrics": [
          {
            "id": "accuracy",
            "type": "accuracy",
            "weight": 1
          }
        ]
      }
    },
    {
      "id": "p1_location",
      "type": "frame_production",
      "mode": "typed_text",
      "prompt": {
        "zh": "ä½ ç°åœ¨ä½åœ¨å“ªé‡Œï¼Ÿ"
      },
      "hints": {
        "layer1": {
          "en": "Someone is asking where you live"
        },
        "layer2": {
          "pinyin": "nÇ xiÃ nzÃ i zhÃ¹ zÃ i nÇlÇ?",
          "structure": "ç°åœ¨ = now, ä½ = live, å“ªé‡Œ = where"
        },
        "layer3": {
          "full": "Where do you live now? Answer: æˆ‘ä½åœ¨... (wÇ’ zhÃ¹ zÃ i...)"
        }
      },
      "target_frames": [
        "frame.location.live"
      ],
      "target_words": [
        "word.ä½",
        "word.åœ¨",
        "word.å“ªé‡Œ",
        "word.ç°åœ¨"
      ],
      "choices": [
        {
          "id": "a",
          "text_zh": "æˆ‘ä½åœ¨çº½çº¦",
          "hints": {
            "layer1": "I live in New York",
            "layer2": "wÇ’ zhÃ¹ zÃ i niÇ”yuÄ“",
            "layer3": "æˆ‘ä½åœ¨çº½çº¦ = I live in New York"
          },
          "is_correct": true
        },
        {
          "id": "b",
          "text_zh": "æˆ‘ä½åœ¨åŒ—äº¬",
          "hints": {
            "layer1": "I live in Beijing",
            "layer2": "wÇ’ zhÃ¹ zÃ i bÄ›ijÄ«ng",
            "layer3": "æˆ‘ä½åœ¨åŒ—äº¬ = I live in Beijing"
          },
          "is_correct": true
        },
        {
          "id": "c",
          "text_zh": "æˆ‘æ˜¯å­¦ç”Ÿ",
          "hints": {
            "layer1": "I am a student",
            "layer2": "wÇ’ shÃ¬ xuÃ©shÄ“ng",
            "layer3": "æˆ‘æ˜¯å­¦ç”Ÿ = I am a student"
          }
        },
        {
          "id": "d",
          "text_zh": "æˆ‘å–œæ¬¢è¿™é‡Œ",
          "hints": {
            "layer1": "I like it here",
            "layer2": "wÇ’ xÇhuÄn zhÃ¨lÇ",
            "layer3": "æˆ‘å–œæ¬¢è¿™é‡Œ = I like it here"
          }
        }
      ],
      "expected": {
        "accepted_patterns": [
          "^æˆ‘ä½åœ¨.+",
          "^æˆ‘åœ¨.+ä½"
        ],
        "semantic_intents": [
          "location_state"
        ]
      },
      "feedback": {
        "correct": {
          "zh": "å¥½çš„ï¼ğŸ™‚"
        },
        "incorrect": {
          "zh": "æ²¡å…³ç³»ï¼ä½ å¯ä»¥è¯´ï¼šæˆ‘ä½åœ¨..."
        }
      },
      "signals": [
        "frame_control",
        "production"
      ],
      "scoring": {
        "pass_threshold": 0.8,
        "partial_threshold": 0.5,
        "metrics": [
          {
            "id": "production",
            "type": "production_correctness",
            "weight": 0.7
          },
          {
            "id": "latency",
            "type": "latency_seconds",
            "weight": 0.3,
            "params": {
              "max_ok_seconds": 12
            }
          }
        ]
      }
    },
    {
      "id": "p1_yesno",
      "type": "frame_comprehension",
      "mode": "tap_choice",
      "prompt": {
        "zh": "ä½ ç°åœ¨ä½åœ¨åŒ—äº¬å—ï¼Ÿ"
      },
      "hints": {
        "layer1": {
          "en": "Someone is asking if you live in Beijing"
        },
        "layer2": {
          "pinyin": "nÇ xiÃ nzÃ i zhÃ¹ zÃ i bÄ›ijÄ«ng ma?",
          "structure": "å— = question marker (yes/no)"
        },
        "layer3": {
          "full": "Do you live in Beijing now?"
        }
      },
      "target_frames": [
        "frame.location.live_question"
      ],
      "target_words": [
        "word.ä½",
        "word.åœ¨",
        "word.åŒ—äº¬",
        "word.å—"
      ],
      "choices": [
        {
          "id": "yes",
          "text_zh": "æ˜¯çš„",
          "hints": {
            "layer1": "Yes",
            "layer2": "shÃ¬ de",
            "layer3": "æ˜¯çš„ = Yes"
          },
          "is_correct": true
        },
        {
          "id": "no",
          "text_zh": "ä¸æ˜¯",
          "hints": {
            "layer1": "No",
            "layer2": "bÃ¹ shÃ¬",
            "layer3": "ä¸æ˜¯ = No"
          },
          "is_correct": true
        },
        {
          "id": "idk",
          "text_zh": "æˆ‘ä¸çŸ¥é“",
          "hints": {
            "layer1": "I don't know",
            "layer2": "wÇ’ bÃ¹ zhÄ«dÃ o",
            "layer3": "æˆ‘ä¸çŸ¥é“ = I don't know"
          }
        },
        {
          "id": "thanks",
          "text_zh": "è°¢è°¢",
          "hints": {
            "layer1": "Thank you",
            "layer2": "xiÃ¨ xiÃ¨",
            "layer3": "è°¢è°¢ = Thank you"
          }
        }
      ],
      "feedback": {
        "correct": {
          "zh": "æ˜ç™½äº†ï¼ğŸ™‚"
        },
        "incorrect": {
          "zh": "æ²¡å…³ç³»ï¼Œè¿™æ˜¯ä¸€ä¸ªæ˜¯/ä¸æ˜¯çš„é—®é¢˜ ğŸ™‚"
        }
      },
      "signals": [
        "comprehension"
      ],
      "scoring": {
        "pass_threshold": 0.8,
        "partial_threshold": 0.5,
        "metrics": [
          {
            "id": "accuracy",
            "type": "accuracy",
            "weight": 1
          }
        ]
      }
    },
    {
      "id": "p1_opinion",
      "type": "frame_production",
      "mode": "typed_text",
      "prompt": {
        "zh": "ä½ å–œæ¬¢ç°åœ¨ä½çš„åœ°æ–¹å—ï¼Ÿ"
      },
      "hints": {
        "layer1": {
          "en": "Someone is asking if you like where you live"
        },
        "layer2": {
          "pinyin": "nÇ xÇhuÄn xiÃ nzÃ i zhÃ¹ de dÃ¬fÄng ma?",
          "structure": "å–œæ¬¢ = like, åœ°æ–¹ = place"
        },
        "layer3": {
          "full": "Do you like where you live? Answer: å–œæ¬¢ (yes) or ä¸å–œæ¬¢ (no)"
        }
      },
      "target_frames": [
        "frame.opinion.like"
      ],
      "target_words": [
        "word.å–œæ¬¢",
        "word.åœ°æ–¹"
      ],
      "choices": [
        {
          "id": "a",
          "text_zh": "å–œæ¬¢",
          "hints": {
            "layer1": "Yes, I like it",
            "layer2": "xÇhuÄn",
            "layer3": "å–œæ¬¢ = Like"
          },
          "is_correct": true
        },
        {
          "id": "b",
          "text_zh": "ä¸å–œæ¬¢",
          "hints": {
            "layer1": "No, I don't like it",
            "layer2": "bÃ¹ xÇhuÄn",
            "layer3": "ä¸å–œæ¬¢ = Don't like"
          },
          "is_correct": true
        },
        {
          "id": "c",
          "text_zh": "è¿˜å¯ä»¥",
          "hints": {
            "layer1": "It's okay",
            "layer2": "hÃ¡i kÄ›yÇ",
            "layer3": "è¿˜å¯ä»¥ = It's okay"
          },
          "is_correct": true
        },
        {
          "id": "d",
          "text_zh": "è°¢è°¢",
          "hints": {
            "layer1": "Thank you",
            "layer2": "xiÃ¨ xiÃ¨",
            "layer3": "è°¢è°¢ = Thank you"
          }
        }
      ],
      "expected": {
        "accepted_patterns": [
          "å–œæ¬¢",
          "ä¸å–œæ¬¢",
          "è¿˜å¯ä»¥",
          "å¾ˆå–œæ¬¢"
        ],
        "semantic_intents": [
          "opinion_express"
        ]
      },
      "feedback": {
        "correct": {
          "zh": "å¾ˆå¥½ï¼èŠå¾—å¾ˆå¼€å¿ƒ ğŸ™‚"
        },
        "incorrect": {
          "zh": "æ²¡å…³ç³»ï¼ä½ å¯ä»¥è¯´ï¼šå–œæ¬¢ æˆ– ä¸å–œæ¬¢"
        }
      },
      "signals": [
        "production",
        "frame_control",
        "confidence"
      ],
      "scoring": {
        "pass_threshold": 0.7,
        "partial_threshold": 0.4,
        "metrics": [
          {
            "id": "production",
            "type": "production_correctness",
            "weight": 0.6
          },
          {
            "id": "latency",
            "type": "latency_seconds",
            "weight": 0.2,
            "params": {
              "max_ok_seconds": 15
            }
          },
          {
            "id": "comprehension",
            "type": "comprehension",
            "weight": 0.2
          }
        ]
      }
    }
  ],
  "placement_rules": {
    "phase_thresholds": [
      {
        "phase_id": "P1",
        "min_score": 0.4
      },
      {
        "phase_id": "P2",
        "min_score": 0.85
      }
    ],
    "engine_selection": "lowest_gap_first"
  }
}