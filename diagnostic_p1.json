{
  "schema_version": "1.0",
  "phase_id": "P1",
  "name": "Phase 1 Survival Diagnostic",
  "description": "Conversation-based placement for survival Mandarin.",
  "welcome_prompt": {
    "en": "We'll practice a short conversation about meeting someone new — greetings, your name, where you're from, and where you live."
  },
  "tasks": [
    {
      "id": "p1_greeting",
      "type": "greeting_recognition",
      "mode": "tap_choice",
      "prompt": {
        "zh": "你好！"
      },
      "hints": {
        "layer1": {
          "en": "This is a greeting meaning 'Hello'"
        },
        "layer2": {
          "pinyin": "nǐ hǎo",
          "structure": "你 = you, 好 = good"
        },
        "layer3": {
          "full": "你好 = Hello"
        }
      },
      "target_frames": [
        "frame.greeting.hello"
      ],
      "target_words": [
        "word.你好"
      ],
      "choices": [
        {
          "id": "a",
          "text_zh": "你好",
          "hints": {
            "layer1": "Hello",
            "layer2": "nǐ hǎo",
            "layer3": "你好 = Hello"
          },
          "target_frame": "frame.greeting.hello",
          "frame_slots_satisfied": [],
          "intent_tags": ["greeting_reciprocal"],
          "quality_signal": "gold",
          "slots_complete": true,
          "hint_affordance": {
            "visible_in_modes": ["tap", "type"],
            "cascade_state_key": "p1_greeting_a_hints",
            "preserve_across_toggle": true,
            "optimized_for_mode": "tap"
          }
        },
        {
          "id": "b",
          "text_zh": "谢谢",
          "hints": {
            "layer1": "Thank you",
            "layer2": "xiè xiè",
            "layer3": "谢谢 = Thank you"
          },
          "quality_signal": "distractor",
          "hint_affordance": {
            "visible_in_modes": ["tap", "type"],
            "cascade_state_key": "p1_greeting_b_hints",
            "preserve_across_toggle": true
          }
        },
        {
          "id": "c",
          "text_zh": "再见",
          "hints": {
            "layer1": "Goodbye",
            "layer2": "zài jiàn",
            "layer3": "再见 = Goodbye"
          },
          "quality_signal": "distractor",
          "hint_affordance": {
            "visible_in_modes": ["tap", "type"],
            "cascade_state_key": "p1_greeting_c_hints",
            "preserve_across_toggle": true
          }
        },
        {
          "id": "d",
          "text_zh": "对不起",
          "hints": {
            "layer1": "Sorry",
            "layer2": "duì bù qǐ",
            "layer3": "对不起 = Sorry"
          },
          "quality_signal": "distractor",
          "hint_affordance": {
            "visible_in_modes": ["tap", "type"],
            "cascade_state_key": "p1_greeting_d_hints",
            "preserve_across_toggle": true
          }
        }
      ],
      "response_model": {
        "after_selection": {
          "zh": "你好！很高兴认识你。",
          "pinyin": "nǐ hǎo! hěn gāoxìng rènshi nǐ.",
          "purpose": "Model the next turn; continue conversation without evaluating prior input."
        }
      },
      "signals": [
        "word_coverage",
        "comprehension",
        "confidence"
      ],
      "signal_tracking": {
        "primary_signal": "comprehension",
        "secondary_signals": ["word_coverage", "confidence"],
        "silent_extraction": true,
        "note": "Signal extraction happens silently; no threshold gating, no user-visible score."
      }
    },
    {
      "id": "p1_name",
      "type": "frame_production",
      "mode": "typed_text",
      "prompt": {
        "zh": "你叫什么名字？"
      },
      "hints": {
        "layer1": {
          "en": "Someone is asking your name"
        },
        "layer2": {
          "pinyin": "nǐ jiào shénme míngzi?",
          "structure": "你 = you, 叫 = called, 什么 = what, 名字 = name"
        },
        "layer3": {
          "full": "What is your name? Answer: 我叫... (wǒ jiào...)"
        }
      },
      "target_frames": [
        "frame.identity.name"
      ],
      "target_words": [
        "word.我",
        "word.叫",
        "word.名字"
      ],
      "choices": [
        {
          "id": "a",
          "text_zh": "我叫...",
          "hints": {
            "layer1": "My name is...",
            "layer2": "wǒ jiào...",
            "layer3": "我叫... = My name is..."
          },
          "target_frame": "frame.identity.name",
          "frame_slots_satisfied": [{"slot": "NAME", "position": "after_verb"}],
          "intent_tags": ["name_introduce"],
          "quality_signal": "gold",
          "slots_complete": true,
          "slot_selectors": [
            {
              "slot_name": "NAME",
              "type": "dropdown",
              "source": "fillers.names",
              "placeholder": "选择一个名字...",
              "required": true
            }
          ],
          "hint_affordance": {
            "visible_in_modes": ["tap"],
            "cascade_state_key": "p1_name_a_hints",
            "preserve_across_toggle": true,
            "optimized_for_mode": "tap"
          }
        },
        {
          "id": "b",
          "text_zh": "我是...",
          "hints": {
            "layer1": "I am...",
            "layer2": "wǒ shì...",
            "layer3": "我是... = I am..."
          },
          "target_frame": "frame.identity.name",
          "frame_slots_satisfied": [{"slot": "NAME", "position": "after_verb"}],
          "intent_tags": ["name_introduce"],
          "quality_signal": "gold",
          "slots_complete": true,
          "slot_selectors": [
            {
              "slot_name": "NAME",
              "type": "dropdown",
              "source": "fillers.names",
              "placeholder": "选择一个名字...",
              "required": true
            }
          ],
          "hint_affordance": {
            "visible_in_modes": ["tap"],
            "cascade_state_key": "p1_name_b_hints",
            "preserve_across_toggle": true,
            "optimized_for_mode": "tap"
          }
        },
        {
          "id": "c",
          "text_zh": "你好",
          "hints": {
            "layer1": "Hello",
            "layer2": "nǐ hǎo",
            "layer3": "你好 = Hello"
          },
          "quality_signal": "distractor",
          "hint_affordance": {
            "visible_in_modes": ["tap"],
            "cascade_state_key": "p1_name_c_hints",
            "preserve_across_toggle": true
          }
        },
        {
          "id": "d",
          "text_zh": "谢谢",
          "hints": {
            "layer1": "Thank you",
            "layer2": "xiè xiè",
            "layer3": "谢谢 = Thank you"
          },
          "quality_signal": "distractor",
          "hint_affordance": {
            "visible_in_modes": ["tap"],
            "cascade_state_key": "p1_name_d_hints",
            "preserve_across_toggle": true
          }
        }
      ],
      "expected": {
        "accepted_patterns": [
          "^我叫.+",
          "^我是.+"
        ],
        "semantic_intents": [
          "name_introduce"
        ]
      },
      "response_model": {
        "after_selection": {
          "zh": "很高兴认识你！",
          "pinyin": "hěn gāoxìng rènshi nǐ!",
          "purpose": "Acknowledge the name introduction and continue dialogue."
        }
      },
      "signals": [
        "frame_control",
        "production"
      ],
      "signal_tracking": {
        "primary_signal": "frame_control",
        "secondary_signals": ["production"],
        "silent_extraction": true,
        "note": "Frame production patterns extracted silently; no threshold applied."
      }
    },
    {
      "id": "p1_nationality",
      "type": "reply_selection",
      "mode": "tap_choice",
      "prompt": {
        "zh": "你是哪国人？"
      },
      "hints": {
        "layer1": {
          "en": "Someone is asking about your nationality"
        },
        "layer2": {
          "pinyin": "nǐ shì nǎ guó rén?",
          "structure": "哪国 = which country, 人 = person"
        },
        "layer3": {
          "full": "What nationality are you?"
        }
      },
      "target_frames": [
        "frame.identity.nationality"
      ],
      "target_words": [
        "word.是",
        "word.哪",
        "word.国",
        "word.人"
      ],
      "choices": [
        {
          "id": "a",
          "text_zh": "我是美国人",
          "hints": {
            "layer1": "I am American",
            "layer2": "wǒ shì měiguó rén",
            "layer3": "我是美国人 = I am American"
          },
          "target_frame": "frame.identity.nationality",
          "frame_slots_satisfied": [{"slot": "NATIONALITY", "position": "after_verb"}],
          "intent_tags": ["nationality_identify"],
          "quality_signal": "gold",
          "slots_complete": true,
          "slot_selectors": [
            {
              "slot_name": "NATIONALITY",
              "type": "dropdown",
              "source": "fillers.nationalities",
              "placeholder": "选择一个国籍...",
              "required": true
            }
          ],
          "hint_affordance": {
            "visible_in_modes": ["tap"],
            "cascade_state_key": "p1_nationality_a_hints",
            "preserve_across_toggle": true,
            "optimized_for_mode": "tap"
          }
        },
        {
          "id": "b",
          "text_zh": "我是老师",
          "hints": {
            "layer1": "I am a teacher",
            "layer2": "wǒ shì lǎoshī",
            "layer3": "我是老师 = I am a teacher"
          },
          "quality_signal": "distractor",
          "hint_affordance": {
            "visible_in_modes": ["tap"],
            "cascade_state_key": "p1_nationality_b_hints",
            "preserve_across_toggle": true
          }
        },
        {
          "id": "c",
          "text_zh": "我喜欢咖啡",
          "hints": {
            "layer1": "I like coffee",
            "layer2": "wǒ xǐhuān kāfēi",
            "layer3": "我喜欢咖啡 = I like coffee"
          },
          "quality_signal": "distractor",
          "hint_affordance": {
            "visible_in_modes": ["tap"],
            "cascade_state_key": "p1_nationality_c_hints",
            "preserve_across_toggle": true
          }
        },
        {
          "id": "d",
          "text_zh": "我住在北京",
          "hints": {
            "layer1": "I live in Beijing",
            "layer2": "wǒ zhù zài běijīng",
            "layer3": "我住在北京 = I live in Beijing"
          },
          "quality_signal": "distractor",
          "hint_affordance": {
            "visible_in_modes": ["tap"],
            "cascade_state_key": "p1_nationality_d_hints",
            "preserve_across_toggle": true
          }
        }
      ],
      "response_model": {
        "after_selection": {
          "zh": "太好了。我是中国人。",
          "pinyin": "tài hǎole. wǒ shì zhōngguó rén.",
          "purpose": "Model the next conversational turn with partner sharing their own nationality."
        }
      },
      "signals": [
        "comprehension",
        "frame_control"
      ],
      "signal_tracking": {
        "primary_signal": "comprehension",
        "secondary_signals": ["frame_control"],
        "silent_extraction": true,
        "note": "Frame comprehension and response appropriateness tracked; no score computed."
      }
    },
    {
      "id": "p1_location",
      "type": "frame_production",
      "mode": "typed_text",
      "prompt": {
        "zh": "你现在住在哪里？"
      },
      "hints": {
        "layer1": {
          "en": "Someone is asking where you live"
        },
        "layer2": {
          "pinyin": "nǐ xiànzài zhù zài nǎlǐ?",
          "structure": "现在 = now, 住 = live, 哪里 = where"
        },
        "layer3": {
          "full": "Where do you live now? Answer: 我住在... (wǒ zhù zài...)"
        }
      },
      "target_frames": [
        "frame.location.live"
      ],
      "target_words": [
        "word.住",
        "word.在",
        "word.哪里",
        "word.现在"
      ],
      "choices": [
        {
          "id": "a",
          "text_zh": "我住在纽约",
          "hints": {
            "layer1": "I live in New York",
            "layer2": "wǒ zhù zài niǔyuē",
            "layer3": "我住在纽约 = I live in New York"
          },
          "target_frame": "frame.location.live",
          "frame_slots_satisfied": [{"slot": "LOCATION", "position": "after_verb"}],
          "intent_tags": ["location_state"],
          "quality_signal": "gold",
          "slots_complete": true,
          "slot_selectors": [
            {
              "slot_name": "LOCATION",
              "type": "dropdown",
              "source": "fillers.cities",
              "placeholder": "选择一个城市...",
              "required": true
            }
          ],
          "hint_affordance": {
            "visible_in_modes": ["tap"],
            "cascade_state_key": "p1_location_a_hints",
            "preserve_across_toggle": true,
            "optimized_for_mode": "tap"
          }
        },
        {
          "id": "b",
          "text_zh": "我住在北京",
          "hints": {
            "layer1": "I live in Beijing",
            "layer2": "wǒ zhù zài běijīng",
            "layer3": "我住在北京 = I live in Beijing"
          },
          "target_frame": "frame.location.live",
          "frame_slots_satisfied": [{"slot": "LOCATION", "position": "after_verb"}],
          "intent_tags": ["location_state"],
          "quality_signal": "gold",
          "slots_complete": true,
          "slot_selectors": [
            {
              "slot_name": "LOCATION",
              "type": "dropdown",
              "source": "fillers.cities",
              "placeholder": "选择一个城市...",
              "required": true
            }
          ],
          "hint_affordance": {
            "visible_in_modes": ["tap"],
            "cascade_state_key": "p1_location_b_hints",
            "preserve_across_toggle": true,
            "optimized_for_mode": "tap"
          }
        },
        {
          "id": "c",
          "text_zh": "我是学生",
          "hints": {
            "layer1": "I am a student",
            "layer2": "wǒ shì xuéshēng",
            "layer3": "我是学生 = I am a student"
          },
          "quality_signal": "distractor",
          "hint_affordance": {
            "visible_in_modes": ["tap"],
            "cascade_state_key": "p1_location_c_hints",
            "preserve_across_toggle": true
          }
        },
        {
          "id": "d",
          "text_zh": "我喜欢这里",
          "hints": {
            "layer1": "I like it here",
            "layer2": "wǒ xǐhuān zhèlǐ",
            "layer3": "我喜欢这里 = I like it here"
          },
          "quality_signal": "distractor",
          "hint_affordance": {
            "visible_in_modes": ["tap"],
            "cascade_state_key": "p1_location_d_hints",
            "preserve_across_toggle": true
          }
        }
      ],
      "expected": {
        "accepted_patterns": [
          "^我住在.+",
          "^我在.+住"
        ],
        "semantic_intents": [
          "location_state"
        ]
      },
      "response_model": {
        "after_selection": {
          "zh": "你在那儿住得怎么样？",
          "pinyin": "nǐ zài nàr zhù de zěnyàng?",
          "purpose": "Model the next turn: partner follows up with a natural related question about their experience in that location."
        }
      },
      "signals": [
        "frame_control",
        "production"
      ],
      "signal_tracking": {
        "primary_signal": "frame_control",
        "secondary_signals": ["production"],
        "silent_extraction": true,
        "note": "Frame production patterns and latency captured; diagnostic uses patterns, not thresholds."
      }
    },
    {
      "id": "p1_yesno",
      "type": "frame_comprehension",
      "mode": "tap_choice",
      "prompt": {
        "zh": "你现在住在北京吗？"
      },
      "hints": {
        "layer1": {
          "en": "Someone is asking if you live in Beijing"
        },
        "layer2": {
          "pinyin": "nǐ xiànzài zhù zài běijīng ma?",
          "structure": "吗 = question marker (yes/no)"
        },
        "layer3": {
          "full": "Do you live in Beijing now?"
        }
      },
      "target_frames": [
        "frame.location.live_question"
      ],
      "target_words": [
        "word.住",
        "word.在",
        "word.北京",
        "word.吗"
      ],
      "choices": [
        {
          "id": "yes",
          "text_zh": "是的",
          "hints": {
            "layer1": "Yes",
            "layer2": "shì de",
            "layer3": "是的 = Yes"
          },
          "target_frame": "frame.location.live_question",
          "frame_slots_satisfied": [],
          "intent_tags": ["affirmative_response"],
          "quality_signal": "gold",
          "slots_complete": true,
          "hint_affordance": {
            "visible_in_modes": ["tap"],
            "cascade_state_key": "p1_yesno_yes_hints",
            "preserve_across_toggle": true,
            "optimized_for_mode": "tap"
          }
        },
        {
          "id": "no",
          "text_zh": "不是",
          "hints": {
            "layer1": "No",
            "layer2": "bù shì",
            "layer3": "不是 = No"
          },
          "target_frame": "frame.location.live_question",
          "frame_slots_satisfied": [],
          "intent_tags": ["negative_response"],
          "quality_signal": "gold",
          "slots_complete": true,
          "hint_affordance": {
            "visible_in_modes": ["tap"],
            "cascade_state_key": "p1_yesno_no_hints",
            "preserve_across_toggle": true,
            "optimized_for_mode": "tap"
          }
        },
        {
          "id": "idk",
          "text_zh": "我不知道",
          "hints": {
            "layer1": "I don't know",
            "layer2": "wǒ bù zhīdào",
            "layer3": "我不知道 = I don't know"
          },
          "quality_signal": "distractor",
          "hint_affordance": {
            "visible_in_modes": ["tap"],
            "cascade_state_key": "p1_yesno_idk_hints",
            "preserve_across_toggle": true
          }
        },
        {
          "id": "thanks",
          "text_zh": "谢谢",
          "hints": {
            "layer1": "Thank you",
            "layer2": "xiè xiè",
            "layer3": "谢谢 = Thank you"
          },
          "quality_signal": "distractor",
          "hint_affordance": {
            "visible_in_modes": ["tap"],
            "cascade_state_key": "p1_yesno_thanks_hints",
            "preserve_across_toggle": true
          }
        }
      ],
      "response_model": {
        "after_selection": {
          "zh": "你在那儿住多久了？",
          "pinyin": "nǐ zài nàr zhù duōjiǔle?",
          "purpose": "Model the next turn: partner deepens the conversation with a follow-up about time spent in that location."
        }
      },
      "signals": [
        "comprehension"
      ],
      "signal_tracking": {
        "primary_signal": "comprehension",
        "secondary_signals": [],
        "silent_extraction": true,
        "note": "Yes/no comprehension and response timing tracked; routing determined from pattern, not threshold."
      }
    },
    {
      "id": "p1_opinion",
      "type": "frame_production",
      "mode": "typed_text",
      "prompt": {
        "zh": "你喜欢现在住的地方吗？"
      },
      "hints": {
        "layer1": {
          "en": "Someone is asking if you like where you live"
        },
        "layer2": {
          "pinyin": "nǐ xǐhuān xiànzài zhù de dìfāng ma?",
          "structure": "喜欢 = like, 地方 = place"
        },
        "layer3": {
          "full": "Do you like where you live? Answer: 喜欢 (yes) or 不喜欢 (no)"
        }
      },
      "target_frames": [
        "frame.opinion.like"
      ],
      "target_words": [
        "word.喜欢",
        "word.地方"
      ],
      "choices": [
        {
          "id": "a",
          "text_zh": "喜欢",
          "hints": {
            "layer1": "Yes, I like it",
            "layer2": "xǐhuān",
            "layer3": "喜欢 = Like"
          },
          "target_frame": "frame.opinion.like",
          "frame_slots_satisfied": [],
          "intent_tags": ["opinion_express", "affirmative"],
          "quality_signal": "gold",
          "slots_complete": true,
          "hint_affordance": {
            "visible_in_modes": ["tap"],
            "cascade_state_key": "p1_opinion_a_hints",
            "preserve_across_toggle": true,
            "optimized_for_mode": "tap"
          }
        },
        {
          "id": "b",
          "text_zh": "不喜欢",
          "hints": {
            "layer1": "No, I don't like it",
            "layer2": "bù xǐhuān",
            "layer3": "不喜欢 = Don't like"
          },
          "target_frame": "frame.opinion.like",
          "frame_slots_satisfied": [],
          "intent_tags": ["opinion_express", "negative"],
          "quality_signal": "gold",
          "slots_complete": true,
          "hint_affordance": {
            "visible_in_modes": ["tap"],
            "cascade_state_key": "p1_opinion_b_hints",
            "preserve_across_toggle": true,
            "optimized_for_mode": "tap"
          }
        },
        {
          "id": "c",
          "text_zh": "还可以",
          "hints": {
            "layer1": "It's okay",
            "layer2": "hái kěyǐ",
            "layer3": "还可以 = It's okay"
          },
          "target_frame": "frame.opinion.like",
          "frame_slots_satisfied": [],
          "intent_tags": ["opinion_express", "neutral"],
          "quality_signal": "gold",
          "slots_complete": true,
          "hint_affordance": {
            "visible_in_modes": ["tap"],
            "cascade_state_key": "p1_opinion_c_hints",
            "preserve_across_toggle": true,
            "optimized_for_mode": "tap"
          }
        },
        {
          "id": "d",
          "text_zh": "谢谢",
          "hints": {
            "layer1": "Thank you",
            "layer2": "xiè xiè",
            "layer3": "谢谢 = Thank you"
          },
          "quality_signal": "distractor",
          "hint_affordance": {
            "visible_in_modes": ["tap"],
            "cascade_state_key": "p1_opinion_d_hints",
            "preserve_across_toggle": true
          }
        }
      ],
      "expected": {
        "accepted_patterns": [
          "喜欢",
          "不喜欢",
          "还可以",
          "很喜欢"
        ],
        "semantic_intents": [
          "opinion_express"
        ]
      },
      "response_model": {
        "after_selection": {
          "zh": "我也喜欢这儿。天气很好，人很友好。",
          "pinyin": "wǒ yě xǐhuān zhèr. tiānqì hěn hǎo, rén hěn yǒuhǎo.",
          "purpose": "Model the next turn: partner shares their own related opinion and adds context to deepen the conversation."
        }
      },
      "signals": [
        "production",
        "frame_control",
        "confidence"
      ],
      "signal_tracking": {
        "primary_signal": "production",
        "secondary_signals": ["frame_control", "confidence"],
        "silent_extraction": true,
        "note": "Multi-valid response patterns (喜欢/不喜欢/还可以) all tracked as valid conversational intents; no 'correctness' judgment."
      }
    }
  ],
  "signal_aggregation": {
    "description": "Diagnostic aggregates behavioral signals from all tasks; no explicit pass/fail gates applied.",
    "routing_model": {
      "phase_readiness": "Inferred from consistent frame_control and production signals across tasks.",
      "engine_selection": "Based on pattern consistency and latency signals; lowest_gap_first routing.",
      "confidence_downgrade_triggers": [
        "option_count < 3 on any tap turn",
        "gold_option_present == false on any turn",
        "signal_extraction failed or incomplete"
      ]
    },
    "note": "Routing and placement happen silently based on observed conversational patterns; no score threshold gating."
  }
}
